<% layout("/layouts/basic.ejs") -%>
<body>
  <form 
    method="POST" 
    action="/listings" 
    novalidate 
    class="needs-validation" 
    enctype="multipart/form-data">
    <div class="row offset-1 mt-3">
      <div class="col-9">
        <h3 style="text-align: center;">Add vehicle</h3>
        <div class="mb-3">
          <label for="vname" class="form-label">Name</label>
          <input
            name="listing[vname]" 
            placeholder="Honda City" 
            type="text" 
            class="form-control" 
            required
          />
        </div>

        <div class="row">
          <div class="col-md-6 mb-3">
            <label for="vtype" class="form-label">Vehicle Type</label>
            <select id="vtype" name="listing[vtype]" class="form-control" required>
              <option>--Select an Option--</option>
              <option value="car">Car</option>
              <option value="electric_car">Electric Car</option>
              <option value="bike">Bike</option>
              <option value="electric_bike">Electric Bike</option>
            </select>
          </div>
        
          <div class="col-md-6 mb-3">
            <label for="vfuel" class="form-label">Fuel</label>
            <select id="vfuel" name="listing[vfuel]" class="form-control" required>
              <option>--Select an Option--</option>
              <option value="petrol">Petrol</option>
              <option value="diesel">Diesel</option>
            </select>
          </div>
        </div>

        <div class="row">
          <div class="col-md-4 mb-3">
            <label for="vlimit" class="form-label">Daily Limit(kms)</label>
            <input
              name="listing[vlimit]" 
              placeholder="80" 
              type="number" 
              class="form-control" 
              required
            />
            <div class="form-text">Maximum kilometers per day</div>
          </div>

          <div class="col-md-4 mb-3">
            <label for="plimit" class="form-label">Seating Capacity</label>
            <input
              name="listing[plimit]" 
              placeholder="5" 
              type="number" 
              class="form-control" 
              required
            />
            <div class="form-text">Number of seats</div>
          </div>

          <div class="col-md-4 mb-3">
            <label for="vpower" class="form-label">Power (hp)</label>
            <input
              name="listing[vpower]" 
              placeholder="125" 
              type="number" 
              class="form-control" 
              required
            />
          </div>
        </div>

        <div class="mb-3">
          <label for="vinfo" class="form-label">Vehicle Information</label>
          <textarea
            class="form-control"
            name="listing[vinfo]"
            placeholder="The Honda City is a stylish and spacious compact sedan known for its fuel-efficient engines and smooth manual or CVT transmissions."
            rows="4"
            required>
          </textarea>
        </div>

        <div class="mb-3">
          <label for="image" class="form-label">Upload Image</label>
          <input
            class="form-control"
            name="listing[image]" 
            type="file"
            required
          />
        </div>

        <div class="mb-3">
          <label for="cost" class="form-label">Cost (per day)</label>
          <input 
            name="listing[cost]"
            placeholder="Enter cost of rent" 
            type="number"
            class="form-control"
            required
          />
        </div>

        <div class="mb-3">
          <label for="location" class="form-label">Location</label>
          <input
            name="listing[location]"
            placeholder="Enter location"
            type="text"
            class="form-control"
            required
          />
        </div>

        <div class="row">
          <div class="col-md-6">
            <div class="mb-3">
              <label for="city" class="form-label">City</label>
              <input 
                name="listing[city]" 
                placeholder="Enter your city" 
                type="text" 
                class="form-control"
                required
              />
            </div>
          </div>

          <div class="col-md-6">
            <div class="mb-3">
              <label for="state" class="form-label">State</label>
              <input 
                name="listing[state]" 
                placeholder="Enter your state" 
                type="text" 
                class="form-control"
                required
              />
            </div>
          </div>
        </div>

        <!-- Added Phone Number Field with 10-digit Validation -->
        <div class="mb-3">
          <label for="phone" class="form-label">Contact Number</label>
          <input 
            name="listing[phone]" 
            placeholder="Enter 10-digit phone number" 
            type="tel" 
            class="form-control"
            pattern="[0-9]{10}"
            title="Please enter exactly 10 digits"
            maxlength="10"
            required
          />
          <div class="form-text">10-digit mobile number only</div>
        </div>

        <button class="btn btn-dark add-btn mt-4 mb-5">Add Vehicle</button>
        <br>
      </div>
    </div>
  </form>

  <!-- Client-side Validation Script -->
  <script>
    // Example client-side validation for phone number
    document.querySelector('form').addEventListener('submit', function(e) {
      const phoneInput = document.querySelector('input[name="listing[phone]"]');
      if (!/^\d{10}$/.test(phoneInput.value)) {
        alert('Please enter a valid 10-digit phone number');
        e.preventDefault();
      }
    });
  </script>
</body>